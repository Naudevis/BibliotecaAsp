
@page "/addbook"
@using Biblioteca.Business.Interfaces
@using Microsoft.EntityFrameworkCore.Metadata.Internal

@inject IBookRepository BookRepository
@inject IAuthorRepository AuthorRepository
@using Biblioteca.Data.Models
@inject NavigationManager Navigation

<EditForm Model="NuevoLibro" OnValidSubmit="OnSubmit">
    <DataAnnotationsValidator/>
    <ValidationSummary/>


    <p style="color:red">@Message</p>
    @if (Title=="Actualizar"){
        <div>

            <label> Código Libro </label>
            <InputText @bind-Value="NuevoLibro.Id_Book" class="form-control" disabled/>

        </div>
    }else{
        <div>

            <label> Código Libro </label>
            <InputText @bind-Value="NuevoLibro.Id_Book" class="form-control" placeholder="El código debe ser de 13 digitos " />

        </div>
    }


    <div>

        <label> Título del Libro </label>
        <InputText @bind-Value="NuevoLibro.Title" class="form-control" placeholder="Introduce al menos 3 caracteres" />

    </div>
    <div>

        <label> Páginas </label>
        <InputText @bind-Value="NuevoLibro.Pages" class="form-control" placeholder="Introduce el número de páginas" />

    </div>
    <div>

        <label> Precio </label>
        <InputNumber @bind-Value="NuevoLibro.Price" class="form-control" placeholder="El precio debe de estar entre 500 a 10000 colones " />

    </div>
    <div>

        <label> Fecha de Edición </label>
        <InputDate @bind-Value="NuevoLibro.EditionDate" class="form-control" placeholder="Introduce la fecha de edición" />

    </div>
    <div>

        <label> Autor </label>
        <select  @bind="NuevoLibro.Author_id" class="form-select">@*?*@
            <option value="">Seleccione un Autor</option>

            @foreach(var autor in Authors){
                <option value="@autor.Author_id">@autor.Name</option>

            }
        </select>

    </div>


    <div class="modal-footer">
        @ChildContent

        <button type="submit" class="btn btn-success">@Title</button>
    </div>
</EditForm>

@code {
    [Parameter]
    public Book NuevoLibro  { get; set; }
    [Parameter] public List<Author> Authors  {get;set;}
    [Parameter] public string Title  {get;set;}
    [Parameter] public string Message  {get;set;}

    [Parameter] public EventCallback OnSubmit { get; set; }
    [Parameter] public RenderFragment ChildContent { get; set; }


}
